package com.rover.ui.screens\n\nimport androidx.compose.foundation.layout.*\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.material.icons.Icons\nimport androidx.compose.material.icons.filled.Close\nimport androidx.compose.material3.*\nimport androidx.compose.runtime.*\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.ui.unit.dp\nimport timber.log.Timber\n\n@Composable\nfun ConnectScreen(\n    onConnect: (String) -> Unit\n) {\n    var roverAddress by remember { mutableStateOf(\"192.168.1.100\") }\n    var isConnecting by remember { mutableStateOf(false) }\n    var errorMessage by remember { mutableStateOf(\"\") }\n    \n    Column(\n        modifier = Modifier\n            .fillMaxSize()\n            .padding(24.dp),\n        horizontalAlignment = Alignment.CenterHorizontally,\n        verticalArrangement = Arrangement.Center\n    ) {\n        // Title\n        Text(\n            text = \"RK3568 Remote Rover\",\n            style = MaterialTheme.typography.headlineLarge,\n            modifier = Modifier.padding(bottom = 32.dp)\n        )\n        \n        // Description\n        Text(\n            text = \"Enter the rover's IP address to connect\",\n            style = MaterialTheme.typography.bodyMedium,\n            modifier = Modifier.padding(bottom = 24.dp)\n        )\n        \n        // IP Address Input\n        OutlinedTextField(\n            value = roverAddress,\n            onValueChange = { roverAddress = it },\n            label = { Text(\"Rover IP Address\") },\n            placeholder = { Text(\"192.168.1.100\") },\n            modifier = Modifier\n                .fillMaxWidth()\n                .padding(bottom = 16.dp),\n            keyboardOptions = KeyboardOptions(imeAction = ImeAction.Done),\n            enabled = !isConnecting,\n            singleLine = true\n        )\n        \n        // Port Input (optional)\n        OutlinedTextField(\n            value = \"8765\",\n            onValueChange = {},\n            label = { Text(\"Port\") },\n            modifier = Modifier\n                .fillMaxWidth()\n                .padding(bottom = 24.dp),\n            enabled = false,\n            singleLine = true\n        )\n        \n        // Error Message\n        if (errorMessage.isNotEmpty()) {\n            Surface(\n                modifier = Modifier\n                    .fillMaxWidth()\n                    .padding(bottom = 16.dp),\n                color = MaterialTheme.colorScheme.errorContainer,\n                shape = MaterialTheme.shapes.small\n            ) {\n                Row(\n                    modifier = Modifier\n                        .padding(12.dp)\n                        .fillMaxWidth(),\n                    horizontalArrangement = Arrangement.SpaceBetween,\n                    verticalAlignment = Alignment.CenterVertically\n                ) {\n                    Text(\n                        text = errorMessage,\n                        color = MaterialTheme.colorScheme.onErrorContainer,\n                        modifier = Modifier.weight(1f)\n                    )\n                    IconButton(\n                        onClick = { errorMessage = \"\" },\n                        modifier = Modifier.size(24.dp)\n                    ) {\n                        Icon(\n                            imageVector = Icons.Filled.Close,\n                            contentDescription = \"Close\",\n                            tint = MaterialTheme.colorScheme.onErrorContainer\n                        )\n                    }\n                }\n            }\n        }\n        \n        // Connect Button\n        Button(\n            onClick = {\n                if (roverAddress.isNotEmpty()) {\n                    isConnecting = true\n                    errorMessage = \"\"\n                    \n                    // Simulate connection delay\n                    try {\n                        onConnect(roverAddress)\n                    } catch (e: Exception) {\n                        Timber.e(e, \"Connection error\")\n                        errorMessage = \"Failed to connect: ${e.message}\"\n                        isConnecting = false\n                    }\n                } else {\n                    errorMessage = \"Please enter a valid IP address\"\n                }\n            },\n            modifier = Modifier\n                .fillMaxWidth()\n                .height(50.dp),\n            enabled = !isConnecting\n        ) {\n            if (isConnecting) {\n                CircularProgressIndicator(\n                    modifier = Modifier.size(24.dp),\n                    color = MaterialTheme.colorScheme.onPrimary,\n                    strokeWidth = 2.dp\n                )\n                Spacer(modifier = Modifier.width(8.dp))\n                Text(\"Connecting...\")\n            } else {\n                Text(\"Connect\")\n            }\n        }\n        \n        // Quick Connect Buttons\n        Spacer(modifier = Modifier.height(32.dp))\n        \n        Text(\n            text = \"Quick Connect\",\n            style = MaterialTheme.typography.labelMedium,\n            modifier = Modifier.padding(bottom = 8.dp)\n        )\n        \n        Row(\n            modifier = Modifier.fillMaxWidth(),\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\n        ) {\n            OutlinedButton(\n                onClick = {\n                    roverAddress = \"192.168.1.100\"\n                },\n                modifier = Modifier.weight(1f)\n            ) {\n                Text(\".100\")\n            }\n            OutlinedButton(\n                onClick = {\n                    roverAddress = \"192.168.1.101\"\n                },\n                modifier = Modifier.weight(1f)\n            ) {\n                Text(\".101\")\n            }\n            OutlinedButton(\n                onClick = {\n                    roverAddress = \"localhost\"\n                },\n                modifier = Modifier.weight(1f)\n            ) {\n                Text(\"Local\")\n            }\n        }\n    }\n}\n
